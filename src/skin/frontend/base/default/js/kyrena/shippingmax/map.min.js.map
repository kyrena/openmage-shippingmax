{"version":3,"sources":["map.js"],"sourcesContent":["/**\n * Created V/12/04/2019\n * Updated L/26/12/2022\n *\n * Copyright 2019-2023 | Fabrice Creuzot <fabrice~cellublue~com>\n * Copyright 2019-2023 | Mickaël Vang <mickael~cellublue~com>\n * https://github.com/kyrena/openmage-shippingmax\n *\n * This program is free software, you can redistribute it or modify\n * it under the terms of the GNU General Public License (GPL) as published\n * by the free software foundation, either version 2 of the license, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but without any warranty, without even the implied warranty of\n * merchantability or fitness for a particular purpose. See the\n * GNU General Public License (GPL) for more details.\n */\n\nif (window.NodeList && !NodeList.prototype.forEach) {\n\tNodeList.prototype.forEach = function (callback, that, i) {\n\t\tthat = that || window;\n\t\tfor (i = 0; i < this.length; i++)\n\t\t\tcallback.call(that, this[i], i, this);\n\t};\n}\n\nvar shippingmax = new (function () {\n\n\t\"use strict\";\n\tthis.show    = false; // select country\n\tthis.showAll = false; // shippingmax_storelocator\n\n\tthis.init = function () {\n\n\t\tconsole.info('shippingmax.map - hello');\n\n\t\t// @see Kyrena_Shippingmax_Model_Source_Maps\n\t\t// pour self.defmap et pour les codes des cartes\n\t\tvar mkr, nb, elem, maps = {},\n\t\t    igncopy = '<a href=\"https://www.ign.fr/\" target=\"_blank\">IGN France<\\/a>',\n\t\t    osmcopy = '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">Open Street Map<\\/a>',\n\t\t    ggmcopy = '<a href=\"https://www.google.com/maps\" target=\"_blank\">Google<\\/a>',\n\t\t    config = {\n\t\t\tign: self.ignkey ? L.tileLayer('https://wxs.ign.fr/' + self.ignkey + '/geoportail/wmts?&request=GetTile&service=WMTS' +\n\t\t\t\t'&version=1.0.0&style=normal&tilematrixset=PM&format=image/jpeg&layer=GEOGRAPHICALGRIDSYSTEMS.MAPS' +\n\t\t\t\t'&tilematrix={z}&tilerow={y}&tilecol={x}', {\n\t\t\t\tattribution: igncopy,\n\t\t\t\tname: 'IGN France',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 18,\n\t\t\t\ttileSize: 256,\n\t\t\t\tdetectRetina: true\n\t\t\t}) : null,\n\t\t\tignst: self.ignkey ? L.tileLayer('https://wxs.ign.fr/' + self.ignkey + '/geoportail/wmts?&request=GetTile&service=WMTS' +\n\t\t\t\t'&version=1.0.0&style=normal&tilematrixset=PM&format=image/jpeg&layer=ORTHOIMAGERY.ORTHOPHOTOS' +\n\t\t\t\t'&tilematrix={z}&tilerow={y}&tilecol={x}', {\n\t\t\t\tattribution: igncopy,\n\t\t\t\tname: 'IGN Sat France',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 18,\n\t\t\t\ttileSize: 256,\n\t\t\t\tdetectRetina: true\n\t\t\t}) : null,\n\t\t\tosm: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmfr: L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map France',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmde: L.tileLayer('https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map Deutschland',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmbre: L.tileLayer('https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map Brezhoneg',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmoci: L.tileLayer('https://tile.openstreetmap.bzh/oc/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map Occitan',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmeus: L.tileLayer('https://tile.openstreetmap.bzh/eu/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map Euskara',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tosmbot: L.tileLayer('https://{s}.tile.openstreetmap.fr/openriverboatmap/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Street Map Boat',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tocm: L.tileLayer('https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: '<a href=\"https://github.com/cyclosm/cyclosm-cartocss-style\" target=\"_blank\">CyclOSM<\\/a>',\n\t\t\t\tname: 'Open Cyclo Map',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\totm: L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\n\t\t\t\tattribution: osmcopy,\n\t\t\t\tname: 'Open Topo Map',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tchm: L.tileLayer('https://wmts.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg', {\n\t\t\t\tattribution: '<a href=\"https://www.swisstopo.admin.ch/\" target=\"_blank\">Swisstopo<\\/a>',\n\t\t\t\tname: 'Swiss Topo Map',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tggm: L.tileLayer('https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {\n\t\t\t\tsubdomains: ['mt0', 'mt1', 'mt2', 'mt3'],\n\t\t\t\tattribution: ggmcopy,\n\t\t\t\tname: 'Google Map',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t}),\n\t\t\tggmst: L.tileLayer('httpS://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {\n\t\t\t\tsubdomains: ['mt0', 'mt1', 'mt2', 'mt3'],\n\t\t\t\tattribution: ggmcopy,\n\t\t\t\tname: 'Google Map Sat',\n\t\t\t\tminZoom: 4,\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tdetectRetina: true\n\t\t\t})\n\t\t};\n\n\t\tif (!config[self.defmap] || (self.defmap === 'ggm') && (['yes', '1', 1].indexOf(navigator.doNotTrack) > -1))\n\t\t\tself.defmap = 'osm';\n\n\t\t// charge les marqueurs\n\t\tself.grp = new L.featureGroup();\n\t\tthis.createMarkers(self.data);\n\n\t\t// charge les fonds de carte\n\t\tfor (elem in config) if (config.hasOwnProperty(elem)) {\n\t\t\tif (config[elem] && config[elem].options.name) {\n\t\t\t\tconfig[elem].options.attribution += ' ' + self.browser;\n\t\t\t\tmaps['<i class=\"hide\">' + elem + '<\\/i> ' + config[elem].options.name] = config[elem];\n\t\t\t}\n\t\t}\n\n\t\t// charge la carte\n\t\tnb = Object.keys(self.data).length;\n\t\tself.map = L.map('map', { layers: [config[self.defmap], self.grp], scrollWheelZoom: true, doubleRightClickZoom: true });\n\n\t\tif (nb < 1) {\n\t\t\tthis.qs('div.main').classList.add('empty');\n\t\t}\n\t\telse if (nb > self.maxpts) {\n\t\t\tself.map.setView([46.76, 2.42], 6); // @todo France\n\t\t}\n\t\telse {\n\t\t\tself.map.fitBounds(self.grp.getBounds(), { maxZoom: 15 });\n\t\t}\n\n\t\t// pseudo plein écran\n\t\tif (!this.qs('.alone')) {\n\t\t\tL.Control.Bigmap = L.Control.extend({\n\t\t\t\toptions: { position: 'topleft' },\n\t\t\t\tonAdd: function (map) {\n\t\t\t\t\tvar elem  = L.DomUtil.create('div', 'leaflet-control-fullscreen leaflet-bar leaflet-control');\n\t\t\t\t\tthis.link = L.DomUtil.create('a', 'leaflet-control-fullscreen-button leaflet-bar-part', elem);\n\t\t\t\t\tthis.link.href = '';\n\t\t\t\t\tthis._map = map;\n\t\t\t\t\tL.DomEvent.disableClickPropagation(this.link);\n\t\t\t\t\tL.DomEvent.on(this.link, 'click', this.action, this);\n\t\t\t\t\treturn elem;\n\t\t\t\t},\n\t\t\t\taction: function (ev) {\n\t\t\t\t\tL.DomEvent.stop(ev);\n\t\t\t\t\tif (ev.detail == 1) {\n\t\t\t\t\t\tvar that = shippingmax, btn = this.getContainer().classList, div = that.qs('.main').classList;\n\t\t\t\t\t\tif (btn.contains('leaflet-fullscreen-on')) {\n\t\t\t\t\t\t\tbtn.remove('leaflet-fullscreen-on');\n\t\t\t\t\t\t\tdiv.remove('full-map');\n\t\t\t\t\t\t\tif (div = that.qs('.item.clicked, .item.active'))\n\t\t\t\t\t\t\t\tthat.scrollToDetails(that.qs('form.results'), div);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tbtn.add('leaflet-fullscreen-on');\n\t\t\t\t\t\t\tdiv.add('full-map');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._map.invalidateSize();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.map.addControl(new L.Control.Bigmap());\n\t\t}\n\n\t\tL.control.scale({ imperial: false }).addTo(self.map);\n\t\tL.control.layers(maps).addTo(self.map);\n\t\tself.grp.addTo(self.map);\n\n\t\t// marque l'éventuel point de livraison sélectionné\n\t\telem = this.qs('.item.active');\n\t\tif (elem) {\n\t\t\tmkr = self.mkrs[elem.getAttribute('id').slice(2)];\n\t\t\tmkr.getElement().classList.add('active');\n\t\t\tthis.goToDetailsFromMarker({ target: mkr, move: false });\n\t\t}\n\n\t\t// géoloc\n\t\telem = this.qs('.btn-geoloc');\n\t\tif (elem && navigator.geolocation)\n\t\t\telem.classList.remove('hide');\n\n\t\t// pour Edge 14 qui laisse le loader affiché\n\t\telem = self.parent.document.getElementById('shippingmaxBox');\n\t\tif (elem)\n\t\t\telem.classList.add('hack');\n\n\t\t// ferme avec échap\n\t\tif ((self != self.parent) && (typeof self.parent.shippingmax == 'object') && (typeof self.parent.shippingmax.keyClose == 'function'))\n\t\t\tdocument.addEventListener('keydown', self.parent.shippingmax.keyClose);\n\t};\n\n\tthis.geoloc = function () {\n\n\t\tif (navigator.geolocation) {\n\t\t\tvar that = shippingmax, elem = that.qs('.btn-geoloc span'), text = elem.textContent;\n\t\t\telem.textContent = '...';\n\t\t\tnavigator.geolocation.getCurrentPosition(function (position) {\n\t\t\t\tthat.submitFormAjax(that.qs('form.address'), position.coords.latitude, position.coords.longitude);\n\t\t\t\telem.textContent = text;\n\t\t\t}, function (err) {\n\t\t\t\telem.textContent = text;\n\t\t\t\tconsole.warn(err);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.createMarkers = function (mkrs) {\n\n\t\tvar mkr, id;\n\t\tself.mkrs = {};\n\n\t\tfor (mkr in mkrs) if (mkrs.hasOwnProperty(mkr)) {\n\n\t\t\tmkr = mkrs[mkr];\n\t\t\tid  = mkr.id;\n\n\t\t\tmkr = L.marker([mkr.lat, mkr.lng], {\n\t\t\t\ttitle: mkr.name,\n\t\t\t\tshadowUrl: null,\n\t\t\t\tshadowRetinaUrl: null,\n\t\t\t\tshadowSize: null,\n\t\t\t\tshadowAnchor: null\n\t\t\t}).addTo(self.grp); //.bindPopup(mkr.name)\n\t\t\tmkr.on('click', shippingmax.goToDetailsFromMarker);\n\t\t\tmkr.on('dblclick', L.DomEvent.stop);\n\t\t\tmkr.superId = id;\n\n\t\t\tself.mkrs[id] = mkr;\n\t\t}\n\n\t\tif ((self.marklat != 0) && (self.marklng != 0)) {\n\t\t\tL.marker([self.marklat, self.marklng], {\n\t\t\t\ticon: L.icon({\n\t\t\t\t\ticonUrl: L.Icon.Default.prototype._getIconUrl().replace('undefined', 'ic-user-map.svg'),\n\t\t\t\t\ticonSize: [26, 40],\n\t\t\t\t\ticonAnchor: [13, 25],\n\t\t\t\t\tshadowUrl: null,\n\t\t\t\t\tshadowRetinaUrl: null,\n\t\t\t\t\tshadowSize: null,\n\t\t\t\t\tshadowAnchor: null,\n\t\t\t\t\tclassName: 'userpos'\n\t\t\t\t})\n\t\t\t}).addTo(self.grp);\n\t\t}\n\t};\n\n\tthis.submitFormAjax = function (form, lat, lng) {\n\n\t\tvar data, xhr, that = shippingmax, wasAll = that.showAll, loader = document.getElementById('loader').classList;\n\t\tif (loader.contains('show'))\n\t\t\treturn false;\n\n\t\ttry {\n\t\t\tloader.add('show');\n\n\t\t\tif (that.showAll)\n\t\t\t\tthat.showAll = false; // true onload and onclick btn-show-all\n\t\t\telse if ((typeof lat == 'number') && (typeof lng == 'number'))\n\t\t\t\tdata = that.serializeForm(form) + '&lat=' + lat + '&lng=' + lng + '&geoloc=1';\n\t\t\telse\n\t\t\t\tdata = that.serializeForm(form);\n\n\t\t\t// form update ou form save\n\t\t\tif (form.action.indexOf('update') > -1) {\n\t\t\t\tthat.qs('form.results').innerHTML = '';\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\n\t\t\t// post ou get\n\t\t\txhr = new XMLHttpRequest();\n\t\t\tif (data) {\n\t\t\t\txhr.open('POST', (data.indexOf('id=') > -1) ? form.action + '?isAjax=true&' + data : form.action + '?isAjax=true', true);\n\t\t\t\txhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t\t\t}\n\t\t\telse {\n\t\t\t\txhr.open('GET', form.action + '?isAjax=true', true);\n\t\t\t}\n\n\t\t\txhr.onreadystatechange = function () {\n\n\t\t\t\tif ((xhr.readyState === 4) && ((xhr.status === 200) || (xhr.status === 0))) {\n\n\t\t\t\t\tvar mkr, elem, subelem, json, nb;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tjson = JSON.parse(xhr.responseText);\n\n\t\t\t\t\t\tif (json.status && json.maplist) {\n\n\t\t\t\t\t\t\t// update\n\t\t\t\t\t\t\tthat.qs('form.results').innerHTML = json.maplist;\n\t\t\t\t\t\t\tself.data    = json.items;\n\t\t\t\t\t\t\tself.marklat = json.lat;\n\t\t\t\t\t\t\tself.marklng = json.lng;\n\n\t\t\t\t\t\t\tif (json.country && (elem = that.qs('input[value=\"' + json.country.toUpperCase() + '\"]'))) {\n\t\t\t\t\t\t\t\tif (subelem = that.qs('.country-choice input[checked]'))\n\t\t\t\t\t\t\t\t\tsubelem.removeAttribute('checked');\n\t\t\t\t\t\t\t\tif (subelem = that.qs('.country-choice input:checked'))\n\t\t\t\t\t\t\t\t\tsubelem.checked = false;\n\t\t\t\t\t\t\t\telem.checked = true;\n\t\t\t\t\t\t\t\telem.setAttribute('checked', 'checked');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (wasAll || json.postcode)\n\t\t\t\t\t\t\t\tdocument.getElementById('postcode').value = json.postcode || '';\n\t\t\t\t\t\t\tif (wasAll || json.city)\n\t\t\t\t\t\t\t\tdocument.getElementById('city').value = json.city || '';\n\n\t\t\t\t\t\t\tself.grp.clearLayers();\n\t\t\t\t\t\t\tnb = Object.keys(self.data).length;\n\t\t\t\t\t\t\tif (nb > 0) {\n\t\t\t\t\t\t\t\tthat.qs('div.main').classList.remove('empty');\n\t\t\t\t\t\t\t\tself.map.invalidateSize();\n\t\t\t\t\t\t\t\tthat.createMarkers(self.data);\n\t\t\t\t\t\t\t\tif (nb > self.maxpts) {\n\t\t\t\t\t\t\t\t\tself.map.setView([46.76, 2.42], 6); // @todo France\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tself.map.fitBounds(self.grp.getBounds(), { maxZoom: 15 });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthat.qs('div.main').classList.add('empty');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (json.status) {\n\n\t\t\t\t\t\t\t// save\n\t\t\t\t\t\t\tif (typeof self.parent.shippingmax.show == 'function') {\n\t\t\t\t\t\t\t\tself.parent.shippingmax.show(json);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthat.resetMarkers(true);\n\t\t\t\t\t\t\t\tmkr = self.mkrs[json.id];\n\t\t\t\t\t\t\t\tmkr.getElement().classList.add('active');\n\t\t\t\t\t\t\t\tself.map.setView(mkr.getLatLng());\n\t\t\t\t\t\t\t\tdocument.getElementById('pt' + json.id).classList.add('active', 'clicked');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (json.error) {\n\t\t\t\t\t\t\tif (json.error === 'refresh')\n\t\t\t\t\t\t\t\tself.location.reload();\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\talert(json.error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\talert(json);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tloader.remove('show');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tconsole.error(e, xhr.responseText); // SyntaxError: Unexpected end of JSON input\n\t\t\t\t\t\tself.location.reload();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txhr.send(data);\n\t\t\treturn false;\n\t\t}\n\t\tcatch (e) {\n\t\t\tconsole.error(e);\n\t\t\tloader.remove('show');\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tthis.serializeForm = function (form) {\n\n\t\tvar data = [];\n\n\t\tArray.prototype.forEach.call(form.elements, function (elem) {\n\n\t\t\tif (elem.nodeName === 'INPUT') {\n\t\t\t\tif (['checkbox', 'radio'].indexOf(elem.getAttribute('type')) > -1) {\n\t\t\t\t\tif (elem.checked)\n\t\t\t\t\t\tdata.push(elem.name + '=' + encodeURIComponent(elem.value));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdata.push(elem.name + '=' + encodeURIComponent(elem.value));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (elem.nodeName === 'SELECT') {\n\t\t\t\tdata.push(elem.name + '=' + encodeURIComponent(elem.value));\n\t\t\t}\n\t\t});\n\n\t\treturn data.join('&');\n\t};\n\n\tthis.goToDetailsFromMarker = function (ev) {\n\n\t\t// ne fait rien si submitFormAjax est en cours ou s'il va commencer\n\t\tif (document.getElementById('loader').classList.contains('show') || (document.activeElement && (document.activeElement.nodeName === 'BUTTON')))\n\t\t\treturn;\n\n\t\tvar that = shippingmax, mkr = ev.target, css = mkr.getElement().classList, already = css.contains('clicked');\n\t\tthat.resetMarkers();\n\n\t\t// désélectionne ou sélectionne\n\t\tif (already) {\n\t\t\tcss.remove('clicked');\n\t\t}\n\t\telse {\n\t\t\tvar elem = document.getElementById('pt' + mkr.superId), form = that.qs('form.results');\n\n\t\t\tif (ev.move !== false) {\n\t\t\t\tcss.add('clicked');\n\t\t\t\telem.classList.add('clicked');\n\t\t\t\tself.map.setView(mkr.getLatLng());\n\t\t\t}\n\t\t\telse if (that.qs('.alone')) {\n\t\t\t\t// pour la carte d'une commande\n\t\t\t\tcss.add('clicked');\n\t\t\t\telem.classList.add('clicked');\n\t\t\t}\n\n\t\t\tthat.scrollToDetails(form, elem);\n\t\t}\n\t};\n\n\tthis.goToMarkerFromDetails = function (elem) {\n\n\t\t// ne fait rien si submitFormAjax est en cours ou s'il va commencer\n\t\tif (document.getElementById('loader').classList.contains('show') || (document.activeElement && (document.activeElement.nodeName === 'BUTTON')))\n\t\t\treturn;\n\n\t\tvar css = elem.classList, already = css.contains('clicked');\n\t\tthis.resetMarkers();\n\n\t\t// désélectionne ou sélectionne\n\t\tif (already) {\n\t\t\tcss.remove('clicked');\n\t\t}\n\t\telse {\n\t\t\tcss.add('clicked');\n\t\t\tvar mkr = self.mkrs[elem.getAttribute('id').slice(2)];\n\t\t\tmkr.getElement().classList.add('clicked');\n\t\t\tself.map.setView(mkr.getLatLng(), 15);\n\t\t}\n\t};\n\n\tthis.scrollToDetails = function (form, elem) {\n\n\t\tif (form.scrollHeight > form.offsetHeight) {\n\t\t\tif (window.innerWidth < 992) {\n\t\t\t\tform.scrollTop = elem.offsetTop;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tform.scrollTop = elem.offsetTop - form.offsetHeight / 2 + 80;\n\t\t\t\tvar rect = elem.getBoundingClientRect();\n\t\t\t\tif ((rect.top < 0) && (rect.bottom <= window.innerHeight))\n\t\t\t\t\tform.scrollTop = elem.offsetTop;\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.resetMarkers = function (active) {\n\t\tdocument.querySelectorAll('.clicked').forEach(function (elem) { elem.classList.remove('clicked'); });\n\t\tif (active)\n\t\t\tdocument.querySelectorAll('.active').forEach(function (elem) { elem.classList.remove('active'); });\n\t};\n\n\tthis.showSelect = function (action) {\n\t\taction = (action === false) ? 'remove' : ((this.show = !this.show) ? 'add' : 'remove');\n\t\tthis.qs('.search-elements').classList[action]('country-select');\n\t\tthis.show = action === 'add';\n\t};\n\n\tthis.updatePostcode = function (elem) {\n\t\tdocument.getElementById('postcode').setAttribute('type', (self.tel.indexOf(elem.value) > -1) ? 'tel' : 'text');\n\t};\n\n\tthis.qs = function (selector) {\n\t\treturn document.querySelector(selector);\n\t};\n\n})();\n\nif (typeof self.addEventListener == 'function') {\n\tself.addEventListener('load', shippingmax.init.bind(shippingmax));\n\tdocument.addEventListener('touchmove', function (ev) {\n\t\t// no zoom\n\t\tif ((ev.scale != 1) || (ev.touches && (ev.touches.length > 1)))\n\t\t\tev.preventDefault();\n\t}, { passive: false });\n}\n\n// instarelou\nfunction _AutofillCallbackHandler() { }\nfunction _pcmBridgeCallbackHandler() { }\nvar PaymentAutofillConfig = {};"],"names":["window","NodeList","prototype","forEach","callback","that","i","this","length","call","shippingmax","show","showAll","init","console","info","elem","maps","igncopy","osmcopy","ggmcopy","config","ign","self","ignkey","L","tileLayer","attribution","name","minZoom","maxZoom","tileSize","detectRetina","ignst","osm","osmfr","osmde","osmbre","osmoci","osmeus","osmbot","ocm","otm","chm","ggm","subdomains","ggmst","defmap","indexOf","navigator","doNotTrack","grp","featureGroup","createMarkers","data","hasOwnProperty","options","browser","nb","Object","keys","map","layers","scrollWheelZoom","doubleRightClickZoom","qs","classList","add","maxpts","setView","fitBounds","getBounds","Control","Bigmap","extend","position","onAdd","DomUtil","create","link","href","_map","DomEvent","disableClickPropagation","on","action","ev","btn","div","stop","detail","getContainer","contains","remove","scrollToDetails","invalidateSize","addControl","control","scale","imperial","addTo","mkr","mkrs","getAttribute","slice","getElement","goToDetailsFromMarker","target","move","geolocation","parent","document","getElementById","keyClose","addEventListener","geoloc","text","textContent","getCurrentPosition","submitFormAjax","coords","latitude","longitude","err","warn","id","marker","lat","lng","title","shadowUrl","shadowRetinaUrl","shadowSize","shadowAnchor","superId","marklat","marklng","icon","iconUrl","Icon","Default","_getIconUrl","replace","iconSize","iconAnchor","className","form","xhr","wasAll","loader","serializeForm","innerHTML","activeElement","blur","XMLHttpRequest","open","setRequestHeader","onreadystatechange","subelem","json","readyState","status","JSON","parse","responseText","maplist","items","country","toUpperCase","removeAttribute","checked","setAttribute","postcode","value","city","clearLayers","resetMarkers","getLatLng","error","location","reload","alert","e","send","Array","elements","nodeName","push","encodeURIComponent","join","css","already","goToMarkerFromDetails","rect","scrollHeight","offsetHeight","innerWidth","scrollTop","offsetTop","getBoundingClientRect","top","bottom","innerHeight","active","querySelectorAll","showSelect","updatePostcode","tel","selector","querySelector","_AutofillCallbackHandler","_pcmBridgeCallbackHandler","bind","touches","preventDefault","passive","PaymentAutofillConfig"],"mappings":"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"}