/*!
 * Copyright 2019-2022 | Fabrice Creuzot <fabrice~cellublue~com>
 * Copyright 2019-2022 | Mickaël Vang <mickael~cellublue~com>
 * Copyright 2019-2022 | Jérôme Siau <fabrice~cellublue~com>
 * https://github.com/kyrena/openmage-shippingmax
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t,i){for(t=t||window,i=0;i<this.length;i++)e.call(t,this[i],i,this)});var shippingmax=new function(){"use strict";this.scroll=0,this.init=function(){document.getElementById("shipping_method-progress-opcheckout")&&new MutationObserver(function(){checkout.reloadStep("shipping")}).observe(document.getElementById("shipping_method-progress-opcheckout"),{attributes:!1,childList:!0,characterData:!1})},this.open=function(e){var t;document.getElementById("shippingmaxDialog")||(this.scroll=window.pageYOffset,(t=document.createElement("div")).innerHTML='<div id="shippingmaxDialog" onclick="shippingmax.close(event);"><div id="shippingmaxBox"><iframe type="text/html" src="'+e+'" class="loader" onload="this.removeAttribute(\'class\');"></iframe><div class="loader"></div></div></div>',document.querySelector("body").appendChild(t.firstChild),document.querySelector("body").classList.add("no-scroll"),document.addEventListener("keydown",shippingmax.keyClose))},this.keyClose=function(e){27===e.keyCode&&(console.log("shippingmax.map - esc/keyClose"),e.preventDefault(),shippingmax.close(!0))},this.close=function(e){document.querySelectorAll(".shipment-methods .dummy, .sp-methods .dummy").forEach(function(e){e.checked=!1}),!0===(e=!0!==e&&"shippingmaxDialog"===e.target.getAttribute("id")?!0:e)&&(document.getElementById("shippingmaxDialog").remove(),document.querySelector("body").classList.remove("no-scroll"),document.removeEventListener("keydown",shippingmax.keyClose),window.scrollTo(0,shippingmax.scroll))},this.click=function(e){document.getElementById(e).parentNode.querySelector("label").click()},this.show=function(e){this.close(!0);var t=document.getElementById(e.code);t&&(t.innerHTML=e.html.slice(e.html.indexOf(">")+1,-6),t.parentNode.querySelector("input").checked=!0,document.dispatchEvent(new CustomEvent("shippingmax_update")),t.parentNode.querySelector("label").click())}};"function"==typeof self.addEventListener&&self.addEventListener("load",shippingmax.init);
//# sourceMappingURL=checkout.min.js.map